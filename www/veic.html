<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volcanic Eruption Impact Calculator</title>
    <script src="chart.js"></script>
    <script src="three.min.js"></script>
    <script src="OrbitControls.min.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #1a252f;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
		
        header {
            background: linear-gradient(135deg, #0b29bb, #052560);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        h1, h2, h3 {
            color: #ffffff;
        }
        
        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .input-section {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary);
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #c0392b;
        }
        
        .visualization-section {
            display: grid;
            grid-template-rows: auto auto;
            gap: 30px;
        }
        
        .chart-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            height: 300px;
        }
        
        .model-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-height: 400px;
            position: relative;
        }
        
        #emissionModel {
            width: 100%;
            height: 100%;
        }
        
        .results-section {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
        }
        
        .result-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            padding: 15px;
            border-radius: 6px;
            background-color: var(--light);
        }
        
        .result-card h4 {
            margin-top: 0;
            color: var(--secondary);
        }
        
        @media (max-width: 900px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }
        }
		
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Volcanic Eruption Impact Calculator</h1>
            <p>Predict eruption impacts and visualize atmospheric emissions</p>
        </div>
    </header>
	
		    <nav style="background:#0d47a1;">
        <div class="container">
<a href="index.html" style="background:#CCC; padding:10px; padding-left:20px; padding-right:20px;     background: #101a64; text-decoration: none; color: #FFF;">MENU</a>
        </div>
    </nav>
    
    <div class="container">
        <section class="calculator-container">
            <div class="input-section">
                <h2>Eruption Parameters</h2>
                <div class="form-group">
                    <label for="volcanoType">Volcano Type</label>
                    <select id="volcanoType">
                        <option value="stratovolcano">Stratovolcano (e.g., Mount St. Helens)</option>
                        <option value="shield">Shield Volcano (e.g., Mauna Loa)</option>
                        <option value="caldera">Caldera (e.g., Yellowstone)</option>
                        <option value="cinder">Cinder Cone</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="location">Location (Latitude, Longitude)</label>
                    <input type="text" id="location" placeholder="e.g., 46.2, -122.2" value="46.2, -122.2">
                </div>
                
                <div class="form-group">
                    <label for="year">Prediction Year</label>
                    <input type="number" id="year" min="2023" max="2100" value="2025">
                </div>
                
                <div class="form-group">
                    <label for="probability">Eruption Probability (%)</label>
                    <input type="number" id="probability" min="1" max="100" value="50">
                </div>
                
                <div class="form-group">
                    <label for="emissionPercentage">Atmospheric Emission Percentage</label>
                    <input type="number" id="emissionPercentage" min="1" max="100" value="30" placeholder="% of total emissions">
                </div>
                
                <div class="form-group">
                    <label for="emissionComposition">Emission Composition</label>
                    <select id="emissionComposition">
                        <option value="basaltic">Basaltic (low silica)</option>
                        <option value="andesitic">Andesitic (medium silica)</option>
                        <option value="rhyolitic">Rhyolitic (high silica)</option>
                    </select>
                </div>
                
                <button onclick="calculateImpact()">Calculate Impact</button>
            </div>
            
            <div class="visualization-section">
                <div class="chart-container">
                    <canvas id="eruptionChart"></canvas>
                </div>
                <div class="model-container">
                    <h3>3D Emission Model</h3>
                    <div id="emissionModel"></div>
                </div>
            </div>
        </section>
        
        <section class="results-section">
            <h2>Impact Analysis Results</h2>
            <div id="resultsText">
                <p>Enter parameters and click "Calculate Impact" to see results.</p>
            </div>
            
            <div class="result-cards" id="resultCards" style="display: none;">
                <div class="result-card">
                    <h4>Eruption Probability</h4>
                    <p id="probResult">--%</p>
                </div>
                <div class="result-card">
                    <h4>Expected VEI</h4>
                    <p id="veiResult">--</p>
                </div>
                <div class="result-card">
                    <h4>Atmospheric Impact</h4>
                    <p id="atmosResult">--</p>
                </div>
                <div class="result-card">
                    <h4>Potential Affected Area</h4>
                    <p id="areaResult">-- km²</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Initialize 3D scene
        let scene, camera, renderer, controls, particleSystem;
        
        function init3DModel() {
            const container = document.getElementById('emissionModel');
            
            // Create scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf0f0f0);
            
            // Create camera
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 5;
            
            // Create renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            // Add controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.25;
            
            // Add lighting
            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);
            
            // Create earth sphere
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshPhongMaterial({
                color: 0x1a75ff,
                specular: 0x111111,
                shininess: 30
            });
            const earth = new THREE.Mesh(geometry, material);
            scene.add(earth);
            
            // Create particle system (will be updated when calculating)
            const particleGeometry = new THREE.BufferGeometry();
            const particleMaterial = new THREE.PointsMaterial({
                color: 0xff0000,
                size: 0.05,
                transparent: true,
                opacity: 0.8
            });
            
            particleSystem = new THREE.Points(particleGeometry, particleMaterial);
            scene.add(particleSystem);
            
            // Handle window resize
            window.addEventListener('resize', () => {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            });
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            
            animate();
        }
        
        // Initialize chart
        let eruptionChart;
        
        function initChart() {
            const ctx = document.getElementById('eruptionChart').getContext('2d');
            
            eruptionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['SO₂', 'CO₂', 'Ash', 'H₂O', 'HCl', 'HF'],
                    datasets: [{
                        label: 'Emission Composition (%)',
                        data: [0, 0, 0, 0, 0, 0],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Predicted Emission Composition'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y}% of total emissions`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Percentage'
                            }
                        }
                    }
                }
            });
        }
        
        // Calculate impact based on inputs
        function calculateImpact() {
            // Get input values
            const volcanoType = document.getElementById('volcanoType').value;
            const location = document.getElementById('location').value;
            const year = parseInt(document.getElementById('year').value);
            const probability = parseInt(document.getElementById('probability').value);
            const emissionPercentage = parseInt(document.getElementById('emissionPercentage').value);
            const emissionComposition = document.getElementById('emissionComposition').value;
            
            // Validate inputs
            if (!location || isNaN(year) || isNaN(probability) || isNaN(emissionPercentage)) {
                alert('Please fill in all fields with valid values');
                return;
            }
            
            // Calculate VEI based on volcano type and probability
            let vei;
            if (volcanoType === 'stratovolcano') {
                vei = Math.min(8, Math.max(2, Math.round(probability / 15)));
            } else if (volcanoType === 'shield') {
                vei = Math.min(4, Math.max(0, Math.round(probability / 25)));
            } else if (volcanoType === 'caldera') {
                vei = Math.min(8, Math.max(6, Math.round(probability / 20)));
            } else { // cinder cone
                vei = Math.min(2, Math.max(0, Math.round(probability / 50)));
            }
            
            // Calculate emission composition
            let so2, co2, ash, h2o, hcl, hf;
            
            if (emissionComposition === 'basaltic') {
                so2 = Math.min(100, Math.round(emissionPercentage * 0.4));
                co2 = Math.min(100, Math.round(emissionPercentage * 0.3));
                ash = Math.min(100, Math.round(emissionPercentage * 0.1));
                h2o = Math.min(100, Math.round(emissionPercentage * 0.15));
                hcl = Math.min(100, Math.round(emissionPercentage * 0.03));
                hf = Math.min(100, Math.round(emissionPercentage * 0.02));
            } else if (emissionComposition === 'andesitic') {
                so2 = Math.min(100, Math.round(emissionPercentage * 0.5));
                co2 = Math.min(100, Math.round(emissionPercentage * 0.2));
                ash = Math.min(100, Math.round(emissionPercentage * 0.2));
                h2o = Math.min(100, Math.round(emissionPercentage * 0.05));
                hcl = Math.min(100, Math.round(emissionPercentage * 0.04));
                hf = Math.min(100, Math.round(emissionPercentage * 0.01));
            } else { // rhyolitic
                so2 = Math.min(100, Math.round(emissionPercentage * 0.3));
                co2 = Math.min(100, Math.round(emissionPercentage * 0.1));
                ash = Math.min(100, Math.round(emissionPercentage * 0.5));
                h2o = Math.min(100, Math.round(emissionPercentage * 0.05));
                hcl = Math.min(100, Math.round(emissionPercentage * 0.03));
                hf = Math.min(100, Math.round(emissionPercentage * 0.02));
            }
            
            // Calculate affected area based on VEI
            let affectedArea;
            if (vei <= 2) affectedArea = 10 + (vei * 5);
            else if (vei <= 4) affectedArea = 50 * Math.pow(2, vei - 2);
            else if (vei <= 6) affectedArea = 500 * Math.pow(2, vei - 4);
            else affectedArea = 5000 * Math.pow(2, vei - 6);
            
            // Update chart
            eruptionChart.data.datasets[0].data = [so2, co2, ash, h2o, hcl, hf];
            eruptionChart.update();
            
            // Update 3D model
            update3DModel(vei, emissionPercentage);
            
            // Update results text
            document.getElementById('resultsText').innerHTML = `
                <h3>Prediction for ${year}</h3>
                <p>A ${volcanoType} at ${location} has a ${probability}% probability of eruption with estimated VEI ${vei}.</p>
                <p>The eruption would release approximately ${emissionPercentage}% of typical emissions for this volcano type, 
                with ${ash}% volcanic ash and ${so2}% sulfur dioxide being the primary components.</p>
            `;
            
            // Update result cards
            document.getElementById('probResult').textContent = `${probability}%`;
            document.getElementById('veiResult').textContent = `VEI ${vei}`;
            document.getElementById('atmosResult').textContent = `${so2}% SO₂, ${ash}% Ash`;
            document.getElementById('areaResult').textContent = `${affectedArea.toLocaleString()} km²`;
            
            document.getElementById('resultCards').style.display = 'grid';
        }
        
        // Update 3D model based on calculations
        function update3DModel(vei, emissionPercentage) {
            // Clear previous particles
            scene.remove(particleSystem);
            
            // Create new particles based on VEI and emission percentage
            const particleCount = Math.min(10000, 1000 * vei * (emissionPercentage / 100));
            const particles = new Float32Array(particleCount * 3);
            
            // Create a spherical distribution of particles
            for (let i = 0; i < particleCount; i++) {
                // Random spherical coordinates
                const radius = 1.1 + Math.random() * (0.1 * vei);
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.random() * Math.PI;
                
                // Convert to Cartesian coordinates
                const x = radius * Math.sin(phi) * Math.cos(theta);
                const y = radius * Math.sin(phi) * Math.sin(theta);
                const z = radius * Math.cos(phi);
                
                particles[i * 3] = x;
                particles[i * 3 + 1] = y;
                particles[i * 3 + 2] = z;
            }
            
            // Create particle system
            const particleGeometry = new THREE.BufferGeometry();
            particleGeometry.setAttribute('position', new THREE.BufferAttribute(particles, 3));
            
            // Adjust particle color based on VEI
            let particleColor;
            if (vei <= 2) particleColor = new THREE.Color(0xffff00); // Yellow
            else if (vei <= 4) particleColor = new THREE.Color(0xff9900); // Orange
            else if (vei <= 6) particleColor = new THREE.Color(0xff3300); // Red
            else particleColor = new THREE.Color(0x990000); // Dark red
            
            const particleMaterial = new THREE.PointsMaterial({
                color: particleColor,
                size: 0.05 * (1 + vei / 5),
                transparent: true,
                opacity: 0.7,
                sizeAttenuation: true
            });
            
            particleSystem = new THREE.Points(particleGeometry, particleMaterial);
            scene.add(particleSystem);
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initChart();
            init3DModel();
        });
    </script>
</body>
</html>